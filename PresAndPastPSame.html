<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Irregular Verbs - Present = Past Participle Pattern</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 50%, #45b7d1 100%);
            min-height: 100vh;
        }
        
        .card-container {
            perspective: 1000px;
            width: 100%;
            height: 320px;
        }
        
        .flashcard {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
            cursor: pointer;
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .card-back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg);
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform-origin: 50% 50%;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .bounce-in {
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .pattern-highlight {
            background: linear-gradient(45deg, #ffeaa7, #fab1a0);
            padding: 4px 8px;
            border-radius: 8px;
            font-weight: bold;
        }
    </style>
</head>
<body class="p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
                üîÑ Irregular Verbs Mastery
            </h1>
            <p class="text-xl text-white opacity-90 mb-2">Learn verbs where Present = Past Participle</p>
            <div class="bg-white/20 backdrop-blur-lg rounded-xl p-4 inline-block">
                <div class="text-lg text-white font-semibold">
                    Pattern: <span class="pattern-highlight text-gray-800">COME - CAME - COME</span>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="bg-white/25 backdrop-blur-lg rounded-2xl p-4 lg:p-6 mb-8">
            <div class="flex flex-wrap justify-center gap-2 lg:gap-4">
                <button onclick="showSection('example')" class="nav-btn btn-primary text-white px-4 lg:px-6 py-2 lg:py-3 rounded-full font-semibold text-sm lg:text-base active">
                    üìö Learn All Verbs
                </button>
                <button onclick="showSection('story')" class="nav-btn bg-white/20 text-white px-4 lg:px-6 py-2 lg:py-3 rounded-full font-semibold text-sm lg:text-base">
                    üìñ Story Challenge
                </button>
            </div>
        </div>

        <!-- Example Section -->
        <div id="example" class="section active">
            <div class="bg-white/95 backdrop-blur-lg rounded-2xl p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">üìö Learn All Verbs</h2>
                <p class="text-lg text-gray-600 mb-8 text-center">Master these 4 essential verbs where Present = Past Participle! Click each card to see examples and patterns.</p>
                
                <!-- All 4 Verb Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
                    <!-- COME Card -->
                    <div class="card-container">
                        <div class="flashcard" id="comeCard" onclick="flipCard('comeCard')">
                            <div class="card-face card-front">
                                <div class="text-6xl mb-4">üö∂</div>
                                <div class="text-3xl font-bold mb-2">COME</div>
                                <div class="text-sm opacity-80">Click to explore!</div>
                            </div>
                            <div class="card-face card-back">
                                <div class="text-xl font-bold mb-3">COME - CAME - COME</div>
                                <div class="text-xs space-y-1 px-2">
                                    <div><strong>Present:</strong> I come here daily</div>
                                    <div><strong>Past:</strong> She came yesterday</div>
                                    <div><strong>Past Participle:</strong> They have come</div>
                                </div>
                                <div class="mt-3 text-xs bg-white/20 rounded p-1">
                                    <div class="font-bold">Movement & Arrival</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RUN Card -->
                    <div class="card-container">
                        <div class="flashcard" id="runCard" onclick="flipCard('runCard')">
                            <div class="card-face card-front">
                                <div class="text-6xl mb-4">üèÉ</div>
                                <div class="text-3xl font-bold mb-2">RUN</div>
                                <div class="text-sm opacity-80">Click to explore!</div>
                            </div>
                            <div class="card-face card-back">
                                <div class="text-xl font-bold mb-3">RUN - RAN - RUN</div>
                                <div class="text-xs space-y-1 px-2">
                                    <div><strong>Present:</strong> I run every morning</div>
                                    <div><strong>Past:</strong> He ran 5 miles</div>
                                    <div><strong>Past Participle:</strong> We have run before</div>
                                </div>
                                <div class="mt-3 text-xs bg-white/20 rounded p-1">
                                    <div class="font-bold">Fast Movement</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- BECOME Card -->
                    <div class="card-container">
                        <div class="flashcard" id="becomeCard" onclick="flipCard('becomeCard')">
                            <div class="card-face card-front">
                                <div class="text-6xl mb-4">ü¶ã</div>
                                <div class="text-3xl font-bold mb-2">BECOME</div>
                                <div class="text-sm opacity-80">Click to explore!</div>
                            </div>
                            <div class="card-face card-back">
                                <div class="text-xl font-bold mb-3">BECOME - BECAME - BECOME</div>
                                <div class="text-xs space-y-1 px-2">
                                    <div><strong>Present:</strong> Dreams become reality</div>
                                    <div><strong>Past:</strong> She became a doctor</div>
                                    <div><strong>Past Participle:</strong> He has become successful</div>
                                </div>
                                <div class="mt-3 text-xs bg-white/20 rounded p-1">
                                    <div class="font-bold">Transformation</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- OVERCOME Card -->
                    <div class="card-container">
                        <div class="flashcard" id="overcomeCard" onclick="flipCard('overcomeCard')">
                            <div class="card-face card-front">
                                <div class="text-6xl mb-4">üí™</div>
                                <div class="text-3xl font-bold mb-2">OVERCOME</div>
                                <div class="text-sm opacity-80">Click to explore!</div>
                            </div>
                            <div class="card-face card-back">
                                <div class="text-xl font-bold mb-3">OVERCOME - OVERCAME - OVERCOME</div>
                                <div class="text-xs space-y-1 px-2">
                                    <div><strong>Present:</strong> We overcome challenges</div>
                                    <div><strong>Past:</strong> She overcame her fear</div>
                                    <div><strong>Past Participle:</strong> They have overcome obstacles</div>
                                </div>
                                <div class="mt-3 text-xs bg-white/20 rounded p-1">
                                    <div class="font-bold">Conquering</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pattern Explanation -->
                <div class="mt-12 max-w-4xl mx-auto">
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 border-l-4 border-blue-400">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4 text-center">üîÑ The Special Pattern</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                            <div class="bg-white rounded-lg p-4">
                                <div class="text-lg font-bold text-green-600 mb-2">Present Form</div>
                                <div class="text-gray-700">come, run, become, overcome</div>
                                <div class="text-sm text-gray-500 mt-1">Used for habits, facts, future</div>
                            </div>
                            <div class="bg-white rounded-lg p-4">
                                <div class="text-lg font-bold text-orange-600 mb-2">Past Form</div>
                                <div class="text-gray-700">came, ran, became, overcame</div>
                                <div class="text-sm text-gray-500 mt-1">Used for completed past actions</div>
                            </div>
                            <div class="bg-white rounded-lg p-4">
                                <div class="text-lg font-bold text-purple-600 mb-2">Past Participle</div>
                                <div class="text-gray-700">come, run, become, overcome</div>
                                <div class="text-sm text-gray-500 mt-1">Used with have/has, been</div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <div class="inline-block bg-yellow-100 text-yellow-800 px-4 py-2 rounded-full font-semibold">
                                ‚ú® Notice: Present = Past Participle (Same form!)
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Story Section -->
        <div id="story" class="section">
            <div class="bg-white/95 backdrop-blur-lg rounded-2xl p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">üìñ Story Challenge</h2>
                <p class="text-lg text-gray-600 mb-8 text-center">Complete Maria's inspiring journey! Fill in the blanks with the correct verb forms. üåü</p>
                
                <!-- Story Progress -->
                <div class="flex justify-center gap-8 mb-8">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-blue-600" id="storyScore">0</div>
                        <div class="text-sm text-gray-600">üíØ Score</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-green-600" id="storyCorrect">0</div>
                        <div class="text-sm text-gray-600">‚úÖ Correct</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-purple-600" id="storyProgress">0/12</div>
                        <div class="text-sm text-gray-600">üìù Progress</div>
                    </div>
                </div>

                <!-- Verb Bank Helper -->
                <div class="max-w-4xl mx-auto mb-8">
                    <div class="bg-gradient-to-r from-green-50 to-teal-50 rounded-2xl p-6 border-l-4 border-green-400">
                        <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">üéØ Verb Bank - Use These Words!</h3>
                        <p class="text-sm text-gray-600 text-center mb-4">Choose from these verbs to complete Maria's story. Some verbs appear multiple times!</p>
                        
                        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3">
                            <!-- Main Pattern Verbs -->
                            <div class="bg-white rounded-lg p-4 text-center border-2 border-blue-200">
                                <div class="text-2xl font-bold text-blue-600">come</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 text-center border-2 border-orange-200">
                                <div class="text-2xl font-bold text-orange-600">run</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 text-center border-2 border-purple-200">
                                <div class="text-2xl font-bold text-purple-600">become</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 text-center border-2 border-red-200">
                                <div class="text-2xl font-bold text-red-600">overcome</div>
                            </div>
                            
                            <!-- Extra Verbs -->
                            <div class="bg-white rounded-lg p-4 text-center border-2 border-green-200">
                                <div class="text-2xl font-bold text-green-600">go</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 text-center border-2 border-teal-200">
                                <div class="text-2xl font-bold text-teal-600">make</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 text-center border-2 border-indigo-200">
                                <div class="text-2xl font-bold text-indigo-600">get</div>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <div class="inline-block bg-yellow-100 text-yellow-800 px-4 py-2 rounded-full text-sm font-semibold">
                                üí° Tip: Focus on the colored verbs - they follow the Present = Past Participle pattern!
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Story Content -->
                <div class="max-w-4xl mx-auto">
                    <div class="bg-gradient-to-r from-pink-50 to-blue-50 rounded-2xl p-8 mb-8 border-l-4 border-pink-400">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">üåü Maria's Journey to Success</h3>
                        
                        <div class="text-lg leading-relaxed text-gray-700 space-y-4" id="storyText">
                            <p>Maria was a young woman with big dreams. Every morning, she would 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="run" data-blank="1" onclick="showOptions(1)">_____</span> 
                            in the park to stay healthy and clear her mind.</p>

                            <p>One day, an opportunity 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="came" data-blank="2" onclick="showOptions(2)">_____</span> 
                            her way. A famous university offered her a scholarship to study medicine.</p>

                            <p>"I have always wanted to 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="become" data-blank="3" onclick="showOptions(3)">_____</span> 
                            a doctor," she told her family excitedly.</p>

                            <p>The first year was difficult. She had 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="run" data-blank="4" onclick="showOptions(4)">_____</span> 
                            out of money several times and had to work part-time jobs.</p>

                            <p>Many challenges 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="came" data-blank="5" onclick="showOptions(5)">_____</span> 
                            her way, but Maria never gave up.</p>

                            <p>She learned to 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="overcome" data-blank="6" onclick="showOptions(6)">_____</span> 
                            every obstacle with determination and hard work.</p>

                            <p>Years passed, and Maria 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="became" data-blank="7" onclick="showOptions(7)">_____</span> 
                            one of the top students in her class.</p>

                            <p>When graduation day 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="came" data-blank="8" onclick="showOptions(8)">_____</span>, 
                            her family was so proud of her achievements.</p>

                            <p>"You have 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="overcome" data-blank="9" onclick="showOptions(9)">_____</span> 
                            so many difficulties," her mother said with tears of joy.</p>

                            <p>Today, Dr. Maria helps patients who 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="come" data-blank="10" onclick="showOptions(10)">_____</span> 
                            to her clinic from all over the city.</p>

                            <p>She has 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="become" data-blank="11" onclick="showOptions(11)">_____</span> 
                            an inspiration to many young people in her community.</p>

                            <p>Every morning, she still 
                            <span class="story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer" data-answer="runs" data-blank="12" onclick="showOptions(12)">_____</span> 
                            in the same park, remembering her journey and dreaming of helping even more people.</p>
                        </div>
                    </div>

                    <!-- Options Panel -->
                    <div class="bg-white rounded-2xl p-6 shadow-lg" id="optionsPanel" style="display: none;">
                        <h4 class="text-xl font-bold text-gray-800 mb-4 text-center">Choose the correct verb form:</h4>
                        <div class="text-center mb-4">
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium" id="currentSentence"></span>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3" id="verbOptions">
                            <!-- Options will be generated here -->
                        </div>
                        <div class="text-center mt-4" id="feedback" style="display: none;">
                            <div class="text-lg font-semibold mb-3" id="feedbackText"></div>
                            <button onclick="closeOptions()" class="btn-primary text-white px-6 py-3 rounded-full font-semibold hover:scale-105 transition-transform">
                                Continue Story üìñ
                            </button>
                        </div>
                    </div>

                    <!-- Completion Message -->
                    <div class="text-center mt-8" id="completionMessage" style="display: none;">
                        <div class="bg-gradient-to-r from-green-100 to-blue-100 rounded-2xl p-8">
                            <div class="text-6xl mb-4">üéâ</div>
                            <h3 class="text-3xl font-bold text-gray-800 mb-4">Story Complete!</h3>
                            <div class="text-xl text-gray-600 mb-6" id="finalMessage"></div>
                            <button onclick="resetStory()" class="btn-primary text-white px-8 py-3 rounded-full font-semibold hover:scale-105 transition-transform">
                                üîÑ Read Story Again
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <script>
        // Irregular verbs where Present = Past Participle
        const presentPastParticipleVerbs = [
            {
                verb: "come",
                forms: "come - came - come",
                sentences: [
                    "I come here every day.",
                    "She came to the party last night.",
                    "They have come a long way since then."
                ],
                hint: "This verb means to move toward or arrive at a place",
                icon: "üö∂",
                action: "Movement Action"
            },
            {
                verb: "run",
                forms: "run - ran - run",
                sentences: [
                    "I run in the park every morning.",
                    "He ran five miles yesterday.",
                    "We have run this race before."
                ],
                hint: "This verb means to move quickly on foot",
                icon: "üèÉ",
                action: "Running Action"
            },
            {
                verb: "become",
                forms: "become - became - become",
                sentences: [
                    "Dreams become reality with hard work.",
                    "She became a doctor after years of study.",
                    "He has become very successful."
                ],
                hint: "This verb means to grow to be or come to be",
                icon: "ü¶ã",
                action: "Transformation"
            },
            {
                verb: "overcome",
                forms: "overcome - overcame - overcome",
                sentences: [
                    "We overcome challenges together.",
                    "She overcame her fear of heights.",
                    "They have overcome many obstacles."
                ],
                hint: "This verb means to succeed in dealing with a problem",
                icon: "üí™",
                action: "Conquering Action"
            }
        ];

        // Game state
        let currentSection = 'example';
        let storyScore = 0;
        let storyCorrect = 0;
        let storyTotal = 12;
        let currentBlank = 0;
        let completedBlanks = new Set();

        // Story answers mapping
        const storyAnswers = {
            1: { answer: "run", options: ["run", "ran", "went", "made"] },
            2: { answer: "came", options: ["came", "come", "went", "got"] },
            3: { answer: "become", options: ["become", "became", "made", "got"] },
            4: { answer: "run", options: ["run", "ran", "went", "overcome"] },
            5: { answer: "came", options: ["came", "come", "went", "made"] },
            6: { answer: "overcome", options: ["overcome", "overcame", "made", "got"] },
            7: { answer: "became", options: ["became", "become", "went", "made"] },
            8: { answer: "came", options: ["came", "come", "went", "got"] },
            9: { answer: "overcome", options: ["overcome", "overcame", "made", "got"] },
            10: { answer: "come", options: ["come", "came", "went", "run"] },
            11: { answer: "become", options: ["become", "became", "made", "got"] },
            12: { answer: "runs", options: ["runs", "ran", "goes", "makes"] }
        };

        // Navigation
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.className = 'nav-btn bg-white/20 text-white px-4 lg:px-6 py-2 lg:py-3 rounded-full font-semibold text-sm lg:text-base';
            });
            
            // Show selected section
            document.getElementById(section).classList.add('active');
            event.target.className = 'nav-btn btn-primary text-white px-4 lg:px-6 py-2 lg:py-3 rounded-full font-semibold text-sm lg:text-base active';
            currentSection = section;
            
            // Initialize section
            if (section === 'story') {
                initStory();
            }
        }

        // Card flip animation
        function flipCard(cardId) {
            const card = document.getElementById(cardId);
            card.classList.toggle('flipped');
        }

        // Story section functions
        function initStory() {
            storyScore = 0;
            storyCorrect = 0;
            completedBlanks = new Set();
            updateStoryStats();
            
            // Reset all blanks to yellow
            document.querySelectorAll('.story-blank').forEach(blank => {
                blank.className = 'story-blank bg-yellow-200 px-2 py-1 rounded font-bold cursor-pointer';
                blank.textContent = '_____';
            });
            
            document.getElementById('optionsPanel').style.display = 'none';
            document.getElementById('completionMessage').style.display = 'none';
        }

        function showOptions(blankNumber) {
            if (completedBlanks.has(blankNumber)) {
                return; // Already completed
            }
            
            currentBlank = blankNumber;
            const storyData = storyAnswers[blankNumber];
            
            // Show options panel
            document.getElementById('optionsPanel').style.display = 'block';
            document.getElementById('feedback').style.display = 'none';
            
            // Set current sentence context
            const blankElement = document.querySelector(`[data-blank="${blankNumber}"]`);
            const sentence = blankElement.closest('p').textContent.replace('_____', '______');
            document.getElementById('currentSentence').textContent = `Blank ${blankNumber}: ${sentence.substring(0, 100)}...`;
            
            // Generate options
            const optionsContainer = document.getElementById('verbOptions');
            optionsContainer.innerHTML = '';
            
            storyData.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'bg-white border-2 border-gray-200 hover:border-blue-400 hover:bg-blue-50 p-3 rounded-xl text-lg font-medium transition-all duration-200 transform hover:scale-105';
                button.textContent = option;
                button.onclick = () => selectAnswer(option, button, blankNumber);
                optionsContainer.appendChild(button);
            });
            
            // Scroll to options
            document.getElementById('optionsPanel').scrollIntoView({ behavior: 'smooth' });
        }

        function selectAnswer(selectedAnswer, buttonElement, blankNumber) {
            const storyData = storyAnswers[blankNumber];
            const isCorrect = selectedAnswer === storyData.answer;
            
            // Disable all buttons
            const buttons = document.querySelectorAll('#verbOptions button');
            buttons.forEach(btn => btn.disabled = true);
            
            const blankElement = document.querySelector(`[data-blank="${blankNumber}"]`);
            
            if (isCorrect) {
                buttonElement.className += ' bg-green-500 text-white bounce-in';
                storyScore += 10;
                storyCorrect++;
                completedBlanks.add(blankNumber);
                
                // Update the blank in the story
                blankElement.textContent = selectedAnswer;
                blankElement.className = 'story-blank bg-green-200 px-2 py-1 rounded font-bold';
                
                document.getElementById('feedbackText').innerHTML = `
                    <div class="text-green-600 text-xl">‚úÖ Perfect! +10 points</div>
                    <div class="text-sm text-gray-600 mt-2">
                        "${selectedAnswer}" is the correct form for this context.
                    </div>
                `;
            } else {
                buttonElement.className += ' bg-red-500 text-white';
                
                // Highlight correct answer
                buttons.forEach(btn => {
                    if (btn.textContent === storyData.answer) {
                        btn.className += ' bg-green-500 text-white bounce-in';
                    }
                });
                
                // Update the blank with correct answer
                blankElement.textContent = storyData.answer;
                blankElement.className = 'story-blank bg-red-200 px-2 py-1 rounded font-bold';
                
                document.getElementById('feedbackText').innerHTML = `
                    <div class="text-red-600 text-xl">‚ùå Not quite right</div>
                    <div class="text-sm text-gray-600 mt-2">
                        The correct answer is "<strong>${storyData.answer}</strong>" for this context.
                    </div>
                `;
            }
            
            updateStoryStats();
            document.getElementById('feedback').style.display = 'block';
            
            // Check if story is complete
            if (completedBlanks.size === storyTotal) {
                setTimeout(() => {
                    showCompletionMessage();
                }, 2000);
            }
        }

        function closeOptions() {
            document.getElementById('optionsPanel').style.display = 'none';
        }

        function updateStoryStats() {
            document.getElementById('storyScore').textContent = storyScore;
            document.getElementById('storyCorrect').textContent = storyCorrect;
            document.getElementById('storyProgress').textContent = `${completedBlanks.size}/${storyTotal}`;
        }

        function showCompletionMessage() {
            document.getElementById('optionsPanel').style.display = 'none';
            document.getElementById('completionMessage').style.display = 'block';
            
            const percentage = (storyCorrect / storyTotal) * 100;
            let message;
            
            if (percentage >= 90) {
                message = `üåü Outstanding! You scored ${storyScore} points with ${storyCorrect}/${storyTotal} correct answers! You've mastered these irregular verbs!`;
            } else if (percentage >= 70) {
                message = `üëè Great job! You scored ${storyScore} points with ${storyCorrect}/${storyTotal} correct answers! You're doing really well with these verbs!`;
            } else if (percentage >= 50) {
                message = `üí™ Good effort! You scored ${storyScore} points. Keep practicing these verb patterns!`;
            } else {
                message = `üìö Keep learning! You scored ${storyScore} points. Review the verb cards and try the story again!`;
            }
            
            document.getElementById('finalMessage').textContent = message;
            document.getElementById('completionMessage').scrollIntoView({ behavior: 'smooth' });
        }

        function resetStory() {
            initStory();
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // App is ready
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'983f474851783442',t:'MTc1ODY4NTQxNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
